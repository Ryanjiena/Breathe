{
    "version": "4.3.3.1",
    "description": "ToDesk is a stable and smooth remote control, remote office and remote assistance software. With end-to-end encryption, it makes every remote access safe and secure.",
    "homepage": "https://www.todesk.com/",
    "license": {
        "identifier": "Proprietary",
        "url": "https://www.todesk.com/licence.html"
    },
    "url": "https://dl.todesk.com/windows/ToDesk_Setup.exe#/dl.7z",
    "hash": "59eea0850e68dedc5b8fccd3709147ed1628e5bac7af5336bbf3253247b4687f",
    "pre_install": [
        "info '[Portable Mode]: Copying user data...'",
        "'config.ini' | ForEach-Object {",
        "    if (Test-Path \"$persist_dir\\$_\") { Copy-Item \"$persist_dir\\$_\" \"$dir\\\" -Force | Out-Null }",
        "}"
    ],
    "post_install": "@('$PLUGINSDIR', '[NSIS].nsi', 'uninst.exe') | ForEach-Object { Remove-Item \"$dir\\$_\" -Recurse -Force -ErrorAction SilentlyContinue }",
    "uninstaller": {
        "script": [
            "ensure \"$persist_dir\" | Out-Null",
            "info '[Portable Mode]: Backing up user data...'",
            "'config.ini' | ForEach-Object {",
            "    if (Test-Path \"$dir\\$_\") { Copy-Item \"$dir\\$_\" \"$persist_dir\\\" -Force | Out-Null }",
            "}"
        ]
    },
    "bin": "ToDesk.exe",
    "shortcuts": [
        [
            "ToDesk.exe",
            "ToDesk"
        ]
    ],
    "persist": [
        "ImageResources",
        "Logs",
        "record"
    ],
    "checkver": {
        "url": "https://www.todesk.com/download.html",
        "regex": "(?sm)版本.*?([\\d.]+)",
        "useragent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36"
    },
    "autoupdate": {
        "url": "https://dl.todesk.com/windows/ToDesk_Setup.exe#/dl.7z"
    }
}
