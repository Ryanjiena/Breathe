{
    "version": "20221001",
    "description": "完美解码是一款能实现流行音视频、高清及 4K 等多媒文件软硬解播放的影音解码包, 集成多媒体播放器 PotPlayer、MPC-BE, 分离器解码器套件 LAV Filters, 高画质渲染器 madVR, 支持中英文语言平台下安装, 是高清爱好者的理想播放工具. 完美解码是一款能实现各种流行视频、HDTV 播放及编码的全能型影音解码包, 自带 Media Player Classic、KMPlayer、PotPlayer 三款流行播放器, 支持简、英语言平台下安装, 能播放 AVI、VCD、DVD、MPG、MP4、RMVB、TS、TP、EVO、M2TS、MKV、OGM、 MOV、SCM、CSF、FLV 等众多种格式的影音文件. ",
    "homepage": "https://jm.wmzhe.com",
    "license": {
        "identifier": "Proprietary"
    },
    "notes": "完美解码中 PotPlayer 新版本 HEVC 软解设置: <http://qxys.3vfree.cn/ShowPost.asp?ThreadID=214>",
    "suggest": {
        "potplayer-skins": "potplayer-skins"
    },
    "url": "https://pan.jiemi.workers.dev/?file=/scoop/else/PureCodec20221001.exe",
    "hash": "sha1:e0a21b66e5d0fbd3c23c8be4a2ee0e6419cf89bb",
    "pre_install": [
        "$des_dir = 'x64'",
        "if ($architecture -eq '32bit') { $des_dir = 'x86' }",
        "@('Capture', 'Extension', 'Extention', 'IconPack', 'Logos', 'Module', 'Playlist', 'PxShader', 'Skins', 'UrlList') | ForEach-Object {",
        "    if (Test-Path \"$persist_dir\\$_\") { Copy-Item \"$persist_dir\\$_\" \"$dir\\$des_dir\\\" -Recurse -Force | Out-Null }",
        "}"
    ],
    "installer": {
        "args": [
            "/S",
            "/D=$dir"
        ]
    },
    "post_install": [
        "Remove-Item \"$([Environment]::GetFolderPath('Desktop'))\\完美解码设置.lnk\" -Force -ErrorAction SilentlyContinue",
        "Remove-Item \"$([Environment]::GetFolderPath('Desktop'))\\完美解码.lnk\" -Force -ErrorAction SilentlyContinue",
        "Remove-Item -Recurse \"$([Environment]::GetFolderPath('startmenu'))\\Programs\\完美解码\" -Force -ErrorAction SilentlyContinue"
    ],
    "pre_uninstall": [
        "$des_dir = 'x64'",
        "if ($architecture -eq '32bit') { $des_dir = 'x86' }",
        "@('Capture', 'Extension', 'Extention', 'IconPack', 'Logos', 'Module', 'Playlist', 'PxShader', 'Skins', 'UrlList') | ForEach-Object {",
        "    if (Test-Path \"$dir\\$des_dir\\$_\") {",
        "        ensure \"$persist_dir\" | Out-Null",
        "        Copy-Item \"$dir\\$des_dir\\$_\" \"$persist_dir\\\" -Recurse -Force | Out-Null",
        "    }",
        "}"
    ],
    "uninstaller": {
        "file": "uninst.exe",
        "args": "/S"
    },
    "architecture": {
        "64bit": {
            "shortcuts": [
                [
                    "x64\\PotPlayerMini64.exe",
                    "PureCodec\\PotPlayer"
                ],
                [
                    "x64\\mpc-hc64.exe",
                    "PureCodec\\MPC-HC"
                ],
                [
                    "x64\\mpc-be64.exe",
                    "PureCodec\\MPC-BE"
                ],
                [
                    "PureSet.exe",
                    "PureCodec\\PureSet"
                ]
            ]
        },
        "32bit": {
            "shortcuts": [
                [
                    "x86\\PotPlayerMini.exe",
                    "PureCodec\\PotPlayer"
                ],
                [
                    "x86\\mpc-hc.exe",
                    "PureCodec\\MPC-HC"
                ],
                [
                    "x86\\mpc-be.exe",
                    "PureCodec\\MPC-BE"
                ],
                [
                    "PureSet.exe",
                    "PureCodec\\PureSet"
                ]
            ]
        }
    },
    "checkver": {
        "url": "https://github.com/Ryanjiena/MetaVersion/raw/main/oneindex.txt",
        "regex": "PureCodec([\\d.]+).exe",
        "reverse": true
    },
    "autoupdate": {
        "url": "https://pan.jiemi.workers.dev/?file=/scoop/else/PureCodec$version.exe",
        "hash": {
            "url": "http://qxys.3vfree.cn/ShowPost.asp?ThreadID=206",
            "mode": "extract",
            "regex": "(?sm)$basename.*?SHA1: $sha1"
        }
    }
}
